<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#000000">
<title>LinusCam</title>
</head>
<body>

<!-- Permission Screen -->
<div id="permissionScreen">
  <div class="perm-icon">üì∏</div>
  <div class="perm-title">LinusCam</div>
  <div class="perm-desc">Capture photos with voice notes embedded right in the image metadata. Grant camera access to get started.</div>
  <button class="perm-btn" id="grantPermBtn">Enable Camera</button>
  <button class="perm-btn" id="viewerOnlyBtn" style="background:transparent;color:var(--accent);border:1px solid var(--accent);margin-top:0">Open Viewer Instead</button>
</div>

<!-- Camera View -->
<div id="cameraView">
  <div id="videoContainer">
    <video id="video" autoplay playsinline muted></video>

    <div class="top-bar">
      <button class="top-btn" id="flipBtn">‚ü≥</button>
      <span class="flash-indicator">LINUSCAM</span>
      <button class="top-btn" id="galleryBtn">‚äû</button>
    </div>

    <div class="bottom-controls">
      <div class="recording-strip" id="recStrip">
        <div class="rec-dot"></div>
        <span id="recLabel">Listening...</span>
      </div>

      <div class="mode-strip">
        <span class="active">Photo</span>
        <span class="viewer-mode" id="openViewerMode">Viewer</span>
      </div>

      <div class="shutter-row">
        <div class="thumb-btn empty" id="thumbBtn">üñº</div>
        <button class="shutter-btn" id="shutterBtn"></button>
        <button class="side-btn" id="micToggle">üé§</button>
      </div>
    </div>
  </div>
  <canvas id="canvas"></canvas>
</div>

<!-- Review View -->
<div id="reviewView">
  <div class="review-top">
    <button class="review-btn cancel" id="reviewCancel">Retake</button>
    <button class="review-btn save" id="reviewSave">Save</button>
  </div>
  <div class="review-image-wrap">
    <img id="reviewImage" alt="Captured photo">
  </div>
  <div class="review-bottom">
    <div class="voice-note-section">
      <div class="voice-note-header">
        <span class="voice-note-label">Voice Note</span>
        <span class="voice-status" id="voiceStatus"></span>
      </div>
      <textarea id="noteText" placeholder="Tap mic to add a voice note, or type here..." rows="3"></textarea>
      <div class="voice-actions">
        <button class="mic-btn record" id="reviewMicBtn">üé§ Record Note</button>
        <button class="mic-btn clear" id="clearNoteBtn">‚úï</button>
      </div>
    </div>
  </div>
</div>

<!-- Gallery View -->
<div id="galleryView">
  <div class="gallery-top">
    <button class="review-btn cancel" id="galleryBack">‚Üê Back</button>
    <span class="gallery-title">LinusCam</span>
    <span style="width:60px"></span>
  </div>
  <div class="gallery-grid" id="galleryGrid"></div>
  <div class="gallery-empty" id="galleryEmpty" style="display:none">
    <div class="gallery-empty-icon">üì∑</div>
    <div class="gallery-empty-text">No photos yet</div>
  </div>
</div>

<!-- Detail View -->
<div id="detailView">
  <div class="detail-top">
    <button class="review-btn cancel" id="detailBack">‚Üê Back</button>
    <span style="font-size:15px;font-weight:600" id="detailDate"></span>
    <span style="width:40px"></span>
  </div>
  <div class="detail-image-wrap">
    <img id="detailImage" alt="Photo detail">
  </div>
  <div class="detail-bottom">
    <div class="detail-note-label">Voice Note</div>
    <div id="detailNoteContent"></div>
    <div class="detail-actions">
      <button class="detail-action-btn download" id="detailDownload">‚§ì Save</button>
      <button class="detail-action-btn delete" id="detailDelete">‚úï Delete</button>
    </div>
  </div>
</div>

<!-- EXIF Viewer View -->
<div id="viewerView">
  <div class="viewer-top">
    <button class="review-btn cancel" id="viewerBack">‚Üê Back</button>
    <span class="gallery-title">EXIF Viewer</span>
    <span style="width:60px"></span>
  </div>
  <div class="viewer-content" id="viewerContent">
    <div class="viewer-empty" id="viewerEmpty">
      <div class="viewer-drop-zone" id="dropZone">
        <div style="font-size:48px;margin-bottom:12px">üîç</div>
        <div style="font-size:17px;font-weight:600;margin-bottom:6px">View Photo Metadata</div>
        <div style="font-size:14px;color:var(--text-secondary);margin-bottom:20px;line-height:1.5;max-width:260px">
          Pick any JPEG to read the voice note embedded in its EXIF data
        </div>
        <label class="viewer-pick-btn" for="viewerFileInput">Choose Photo</label>
        <input type="file" id="viewerFileInput" accept="image/jpeg,image/jpg,.jpg,.jpeg" style="display:none">
      </div>
    </div>
    <div class="viewer-result" id="viewerResult" style="display:none">
      <div class="viewer-image-wrap">
        <img id="viewerImage" alt="Viewed photo">
      </div>
      <div class="viewer-meta">
        <div class="viewer-meta-section">
          <div class="viewer-meta-label">Voice Note / Description</div>
          <div class="viewer-meta-value" id="viewerNote"></div>
        </div>
        <div class="viewer-meta-section">
          <div class="viewer-meta-label">User Comment</div>
          <div class="viewer-meta-value" id="viewerComment"></div>
        </div>
        <div class="viewer-meta-section">
          <div class="viewer-meta-label">Date Taken</div>
          <div class="viewer-meta-value" id="viewerDate"></div>
        </div>
        <div class="viewer-meta-section">
          <div class="viewer-meta-label">Software</div>
          <div class="viewer-meta-value" id="viewerSoftware"></div>
        </div>
        <div class="viewer-meta-section">
          <div class="viewer-meta-label">Camera / Device</div>
          <div class="viewer-meta-value" id="viewerCamera"></div>
        </div>
        <div class="viewer-meta-section">
          <div class="viewer-meta-label">Resolution</div>
          <div class="viewer-meta-value" id="viewerResolution"></div>
        </div>
        <div style="padding-top:8px">
          <label class="viewer-pick-btn small" for="viewerFileInput">Choose Another Photo</label>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Flash overlay -->
<div class="flash-overlay" id="flashOverlay"></div>

<!-- Toast -->
<div class="toast" id="toast"></div>

<script type="module" src="/src/main.js"></script>
</body>
</html>
